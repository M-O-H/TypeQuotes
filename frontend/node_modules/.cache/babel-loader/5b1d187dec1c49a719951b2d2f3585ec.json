{"ast":null,"code":"var _jsxFileName = \"/home/m-o-h/programs/Lap/typing-game/frontend/src/components/Input.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { getResult, replace } from './keyPress';\nimport styled from 'styled-components';\nimport Status from './Status';\nimport Spinner from 'react-bootstrap/Spinner';\nimport axios from 'axios';\nimport '../style/style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar correctLetters = 0;\nvar startTime = null;\nvar mistakes = 0;\nvar index = 0;\nvar string = 0;\nconst BoxWrapper = styled.div`\ndisplay: flex;\npadding: 0 6em;\njustify-content: center;\nalign-items: center;\nheight: 60vh;\nwidth: 100%;\n`;\n_c = BoxWrapper;\nconst SpinnerWrapper = styled.div`\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 100%;\nheight: 100%;`;\n_c2 = SpinnerWrapper;\nconst Button = styled.button`\nborder: none;\noutline: none;\npadding: 1rem;\nbackground: var(--icons-text-color);\ncolor: var(--body-background);\n`;\n_c3 = Button;\n\nconst handleKeyPress = (e, text) => {\n  const arrayQuote = document.querySelectorAll('span');\n  let cursorCharacter = arrayQuote[index];\n  arrayQuote[0].style.backgroundColor = 'initial';\n  if (!startTime) startTime = new Date();\n\n  if (e.keyCode === 8 && index > 0) {\n    --correctLetters;\n    --string;\n    cursorCharacter.classList.remove('cursor');\n    cursorCharacter = arrayQuote[--index];\n    cursorCharacter.classList.remove('incorrect', 'done');\n  } else if (string >= 93) {\n    console.log(\"inc\");\n  } else if (e.key === cursorCharacter.innerText) {\n    ++correctLetters;\n    string = 0;\n    replace(cursorCharacter, ['done', 'incorrect', 'cursor']);\n    cursorCharacter = arrayQuote[++index];\n  } else if (e.key !== cursorCharacter.innerText) {\n    ++mistakes;\n    ++string;\n    replace(cursorCharacter, ['incorrect', 'done', 'cursor']);\n    cursorCharacter = arrayQuote[++index];\n  }\n\n  if (index >= text.length) {\n    var result = getResult(arrayQuote, text, startTime, correctLetters, mistakes);\n    return result;\n  }\n\n  cursorCharacter.classList.add('cursor');\n};\n\nconst Input = () => {\n  _s();\n\n  const [quote, setQuote] = useState(() => null);\n  const [loading, setLoading] = useState(() => true);\n  index = 0;\n  correctLetters = 0;\n  startTime = null;\n  mistakes = 0;\n  index = 0;\n\n  const KeyDownEvent = () => {\n    document.onkeydown = e => {\n      let value = handleKeyPress(e, quote);\n\n      if (value) {\n        var result;\n        axios(\"/user\").then(res => {\n          result = {\n            id: res.data.id,\n            wpm: value.wpm,\n            acc: value.accuracy\n          };\n          setResult(result);\n          document.onkeydown = null;\n        }).then(err => {\n          if (err) {\n            result = {\n              wpm: value.wpm,\n              acc: value.accuracy\n            };\n            setResult(result);\n          }\n        });\n      }\n    };\n  };\n\n  const fetchQuotes = async () => {\n    setLoading(true);\n    setResult(null);\n    await axios.get('https://api.quotable.io/random').then(res => {\n      setLoading(false);\n      setQuote(res.data.content);\n    }).catch(err => {\n      throw err;\n    });\n  };\n\n  const handleClick = e => {\n    e.target.blur();\n    fetchQuotes();\n  };\n\n  const [result, setResult] = useState(() => null);\n  useEffect(() => {\n    setResult(null);\n    fetchQuotes();\n  }, []);\n\n  const render = () => {\n    if (loading === true) return /*#__PURE__*/_jsxDEV(SpinnerWrapper, {\n      className: \"SpinnerWrapper\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        className: \"spinner\",\n        animation: \"border\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 53\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 10\n    }, this);else if (result == null) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"display-quote\",\n          children: quote.split('').map((char, id) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"char\",\n            children: char.toLowerCase()\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 39\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          tabindex: \"-1\",\n          onClick: handleClick,\n          className: \"disabled\",\n          children: \"NEXT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 10\n      }, this);\n    } else return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Status, {\n        result: result\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        tabindex: \"-1\",\n        onClick: handleClick,\n        className: \"disabled\",\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(BoxWrapper, {\n    children: render()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Input, \"d8tTstAewkclwaK6yPMP7cYyETY=\");\n\n_c4 = Input;\nexport default Input;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"BoxWrapper\");\n$RefreshReg$(_c2, \"SpinnerWrapper\");\n$RefreshReg$(_c3, \"Button\");\n$RefreshReg$(_c4, \"Input\");","map":{"version":3,"sources":["/home/m-o-h/programs/Lap/typing-game/frontend/src/components/Input.js"],"names":["React","useState","useEffect","getResult","replace","styled","Status","Spinner","axios","correctLetters","startTime","mistakes","index","string","BoxWrapper","div","SpinnerWrapper","Button","button","handleKeyPress","e","text","arrayQuote","document","querySelectorAll","cursorCharacter","style","backgroundColor","Date","keyCode","classList","remove","console","log","key","innerText","length","result","add","Input","quote","setQuote","loading","setLoading","KeyDownEvent","onkeydown","value","then","res","id","data","wpm","acc","accuracy","setResult","err","fetchQuotes","get","content","catch","handleClick","target","blur","render","split","map","char","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { getResult ,replace } from './keyPress';\nimport styled  from 'styled-components'\nimport Status from './Status';\nimport Spinner from 'react-bootstrap/Spinner'\nimport axios from 'axios';\nimport '../style/style.css'\n\nvar correctLetters = 0;\nvar startTime = null;\nvar mistakes = 0;\nvar  index = 0;\nvar string = 0;\n\nconst BoxWrapper = styled.div`\ndisplay: flex;\npadding: 0 6em;\njustify-content: center;\nalign-items: center;\nheight: 60vh;\nwidth: 100%;\n`;\n\nconst SpinnerWrapper = styled.div`\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 100%;\nheight: 100%;`\n\nconst Button = styled.button`\nborder: none;\noutline: none;\npadding: 1rem;\nbackground: var(--icons-text-color);\ncolor: var(--body-background);\n`\nconst handleKeyPress = (e, text)=>{\n\tconst arrayQuote = document.querySelectorAll('span');\n\tlet cursorCharacter =  arrayQuote[index];\n\tarrayQuote[0].style.backgroundColor = 'initial';\n\tif(!startTime)\n\t\tstartTime = new Date();\n\tif(e.keyCode === 8 && index > 0){\n\t\t--correctLetters;\n\t\t--string;\n\t\tcursorCharacter.classList.remove('cursor');\n\t\tcursorCharacter =  arrayQuote[--index];\n\t\tcursorCharacter.classList.remove('incorrect', 'done');\n\t}\n\telse if(string >= 93){\n\t\tconsole.log(\"inc\")\n\t}\n\telse if(e.key === cursorCharacter.innerText ){\n\t\t++correctLetters;\n\t\tstring = 0;\n\t\treplace(cursorCharacter, ['done', 'incorrect', 'cursor']);\n\t\tcursorCharacter =  arrayQuote[++index];\n\t}\n\telse if(e.key !== cursorCharacter.innerText){\n\t\t++mistakes;\n\t\t++string;\n\t\treplace(cursorCharacter, ['incorrect', 'done', 'cursor']);\n\t\tcursorCharacter =  arrayQuote[++index];\n\t}\n\tif(index  >= text.length){\n\t\tvar result = getResult(arrayQuote,text, startTime, correctLetters, mistakes);\n\t\treturn result\n\t}\t\n\tcursorCharacter.classList.add('cursor');\n};\n\n\nconst Input = ()=>{\n\tconst [quote, setQuote] = useState(()=>null);\n\tconst [loading, setLoading] = useState(()=>true);\n\tindex = 0;\n\tcorrectLetters = 0;\n\tstartTime = null;\n\tmistakes = 0;\n\tindex = 0;\n\t\n\n\tconst KeyDownEvent = () => {\n\t\tdocument.onkeydown =((e)=>{\n\t\t\tlet value =  handleKeyPress(e, quote);\n\t\t\tif(value){\n\t\t\t\tvar result;\n\t\t\t\taxios(\"/user\")\n\t\t\t\t.then(res => {\n\t\t\t\t\tresult = {id:res.data.id, wpm:value.wpm, acc:value.accuracy}\n\t\t\t\t\tsetResult(result);\n\t\t\t\t\tdocument.onkeydown = null;\n\t\t\t\t})\n\t\t\t\t.then(err => {\n\t\t\t\t\tif(err){\n\t\t\t\t\tresult = {wpm:value.wpm, acc:value.accuracy}\n\t\t\t\t\tsetResult(result)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\tconst fetchQuotes = async()=>{\n\t\tsetLoading(true)\n\t\tsetResult(null);\n\t\tawait axios.get('https://api.quotable.io/random')\n\t\t.then(res => {\n\t\t\tsetLoading(false)\n\t\t\tsetQuote(res.data.content);\n\t\t})\n\t\t.catch((err) => {\n\t\t\tthrow err;\n\t\t})\n\t}\n\t\n\tconst handleClick = (e) => {\n\t\te.target.blur();\n\t\tfetchQuotes()\n\t}\n\t\n\tconst [result, setResult] = useState(()=>null);\n\n\nuseEffect(() => {\n\tsetResult(null);\n\tfetchQuotes();\n}, []);\n\n\nconst render = ()=>{\n\tif(loading === true)\n\t\treturn <SpinnerWrapper className=\"SpinnerWrapper\"><Spinner className=\"spinner\" animation=\"border\" /></SpinnerWrapper>\n\telse if(result == null){\n\t\treturn <div>\n\t\t<div className=\"display-quote\">{\n\t\t\t\tquote.split('').map((char, id) => <span key={id} className=\"char\">{char.toLowerCase()}</span>)}\n\t\t\t</div>\n\t\t\t<Button type=\"submit\" tabindex=\"-1\" onClick={handleClick} className=\"disabled\" >NEXT</Button>\n\t\t</div>\n\t\t}\n\t\telse return <div>\n\t\t\t<Status result={result}/>\n\t\t\t<Button type=\"submit\" tabindex=\"-1\" onClick={handleClick} className=\"disabled\" >Next</Button>\n\t\t</div>\n}\n\treturn (\n\t\t<BoxWrapper> \n\t\t\t{render()}\n\t\t</BoxWrapper>\n\t)\n}\n\nexport default Input"]},"metadata":{},"sourceType":"module"}